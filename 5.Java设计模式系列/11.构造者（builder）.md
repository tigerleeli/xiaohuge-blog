**æ„é€ è€…(builder)è®¾è®¡æ¨¡å¼æ˜¯é€šè¿‡å°†å¤æ‚å¯¹è±¡çš„æ„é€ è¿‡ç¨‹æ‹†åˆ†ä¸ºå¤šä¸ªç®€å•çš„æ­¥éª¤ï¼Œä½¿å¾—åˆ›å»ºå¯¹è±¡æ›´åŠ çµæ´»ï¼Œå¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æ›´å¼ºã€‚**

## ä»€ä¹ˆæ˜¯æ„é€ è€…æ¨¡å¼

Java æ„é€ (é€ )è€…(builder)è®¾è®¡æ¨¡å¼å°†å¤æ‚å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åˆ†è§£æˆå¤šä¸ªç®€å•çš„æ„é€ æ­¥éª¤ï¼Œæä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹å¼æ¥æ„é€ ç‰¹å®šç±»å‹çš„å¯¹è±¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œéœ€è¦å¤„ç†å¾ˆå¤šå‚æ•°æˆ–è€…å±æ€§ã€‚å¦‚æœä½¿ç”¨ä¼ ç»Ÿçš„å·¥å‚æ¨¡å¼ï¼Œåˆ™éœ€è¦ç¼–å†™å¾ˆå¤šçš„æ„é€ å‡½æ•°ã€‚è¿™æ ·çš„ä»£ç å¯è¯»æ€§å·®ï¼Œç»´æŠ¤æˆæœ¬ä¹Ÿé«˜ã€‚è€Œä½¿ç”¨æ„é€ è€…(builder)æ¨¡å¼ï¼Œåˆ™å¯ä»¥æ›´å¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ„é€ è€…(builder)æ¨¡å¼å°†å¤æ‚å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹åˆ†è§£æˆå¤šä¸ªç®€å•çš„æ„é€ æ­¥éª¤ï¼Œå¹¶æä¾›äº†è‡ªå®šä¹‰åºåˆ—çš„æ„é€ æ–¹æ³•ï¼Œç¨‹åºå‘˜å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰æ„é€ æ­¥éª¤åŠå®ƒä»¬çš„é¡ºåºï¼Œä»è€Œä½¿åˆ›å»ºå¤æ‚å¯¹è±¡æ›´åŠ ä¼˜é›…ã€çµæ´»ä¸å¯ç®¡ç†ã€‚

## æ„é€ è€…æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯

 - åˆ›å»ºå¯¹è±¡æ—¶åŒ…å«å¤šä¸ªå±æ€§æˆ–å­—æ®µã€‚
 - éœ€è¦åˆ›å»ºä¸å¯å˜å¯¹è±¡ï¼ˆå¯¹è±¡åˆå§‹åŒ–æ—¶ä¸€æ—¦è®¾ç½®ï¼Œå°±ä¸èƒ½ä¿®æ”¹å±æ€§å˜é‡ï¼‰ã€‚
 - éœ€è¦åœ¨å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ä¸­æ ¹æ®ä¸åŒæ¡ä»¶åˆ›å»ºä¸åŒç±»å‹çš„å¯¹è±¡ã€‚

## æ„é€ è€…æ¨¡å¼çš„ä»£ç ç¤ºä¾‹ï¼š

Person ç±»ï¼š

```java
// å®šä¹‰ä¸€ä¸ª Person ç±»
public class Person {
    private final String firstName; // å¿…é€‰é¡¹ï¼Œç”¨ final ä¿®é¥°
    private final String lastName;  // å¿…é€‰é¡¹ï¼Œç”¨ final ä¿®é¥°
    private final int age;          // å¯é€‰é¡¹ï¼Œä¸ç”¨ final ä¿®é¥°
    private final String phoneNumber; // å¯é€‰é¡¹ï¼Œä¸ç”¨ final ä¿®é¥°

    // Person çš„æ„é€ å‡½æ•°ç§æœ‰åŒ–
    private Person(Builder builder) {
        this.firstName = builder.firstName;
        this.lastName = builder.lastName;
        this.age = builder.age;
        this.phoneNumber = builder.phoneNumber;
    }

    // å»ºé€ å™¨ç±»
    public static class Builder {
        private final String firstName; // å¿…é€‰é¡¹ï¼Œç”¨ final ä¿®é¥°
        private final String lastName;  // å¿…é€‰é¡¹ï¼Œç”¨ final ä¿®é¥°
        private int age;          // å¯é€‰é¡¹ï¼Œä¸ç”¨ final ä¿®é¥°
        private String phoneNumber; // å¯é€‰é¡¹ï¼Œä¸ç”¨ final ä¿®é¥°

        public Builder(String firstName, String lastName) { // å¿…é€‰å‚æ•°
            this.firstName = firstName;
            this.lastName = lastName;
        }

        public Builder age(int age) { // å¯é€‰å‚æ•°
            this.age = age;
            return this;
        }

        public Builder phoneNumber(String phoneNumber) { // å¯é€‰å‚æ•°
            this.phoneNumber = phoneNumber;
            return this;
        }

        // æ„é€  Person å¯¹è±¡å¹¶è¿”å›
        public Person build() {
            return new Person(this);
        }
    }

    // Person ç±»çš„å…¶å®ƒæ–¹æ³•
    public String getFirstName() {
        return firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public int getAge() {
        return age;
    }

    public String getPhoneNumber() {
        return phoneNumber;
    }

    @Override
    public String toString() {
        return "Person{" +
                "firstName='" + firstName + '\'' +
                ", lastName='" + lastName + '\'' +
                ", age=" + age +
                ", phoneNumber='" + phoneNumber + '\'' +
                '}';
    }
}
```

Person ç±»ä¸­æœ‰ä¸€ä¸ªç§æœ‰åŒ–çš„æ„é€ å‡½æ•°ï¼Œä»¥åŠä¸€ä¸ªå»ºé€ å™¨ç±» Builderã€‚Builder ç±»ä¸­æ²¡æœ‰æ‰€æœ‰å±æ€§çš„æ„é€ å‡½æ•°å’Œ setter æ–¹æ³•ï¼Œè€Œæ˜¯åœ¨ build() å‡½æ•°ä¸­è¿”å›ä¸€ä¸ª Person å¯¹è±¡ï¼Œå¹¶å°†å®ƒçš„å±æ€§è®¾ç½®ä¸ºä¹‹å‰åœ¨ Builder ä¸­è®¾ç½®çš„å±æ€§ã€‚

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨Builder æ¨¡å¼æ¥åˆ›å»ºä¸€ä¸ª Personï¼š

```java
public class BuilderExample {
    public static void main(String[] args) {
        // åˆ›å»ºä¸€ä¸ª Person å¯¹è±¡ï¼Œåªè®¾ç½®äº†å¿…é€‰é¡¹
        Person person1 = new Person.Builder("John", "Doe").build();
        System.out.println(person1); // è¾“å‡ºï¼šPerson{firstName='John', lastName='Doe', age=0, phoneNumber='null'}

        // åˆ›å»ºä¸€ä¸ª Person å¯¹è±¡ï¼Œè®¾ç½®äº†æ‰€æœ‰é€‰é¡¹
        Person person2 = new Person.Builder("Jane", "Doe")
                .age(25)
                .phoneNumber("555-555-5555")
                .build();
        System.out.println(person2); // è¾“å‡ºï¼šPerson{firstName='Jane', lastName='Doe', age=25, phoneNumber='555-555-5555'}
    }
}
```

åœ¨ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ª Person å¯¹è±¡ã€‚ä¸€ä¸ªåªè®¾ç½®äº†å¿…é€‰é¡¹ï¼Œå¦ä¸€ä¸ªåˆ™è®¾ç½®äº†æ‰€æœ‰é€‰é¡¹ã€‚ä½¿ç”¨Builder æ¨¡å¼å¯ä»¥ä½¿å¾—å¯¹è±¡åˆ›å»ºè¿‡ç¨‹æ›´åŠ å®¹æ˜“å’Œå¯ç®¡ç†ã€‚

## æ„é€ è€…æ¨¡å¼çš„å®é™…åº”ç”¨

åœ¨å®é™…çš„ Spring Boot å¼€å‘ä¸­ï¼Œæœ‰å¾ˆå¤šå¸¸ç”¨æ¡†æ¶å¹¿æ³›ä½¿ç”¨äº† Builder æ¨¡å¼ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„æ¡†æ¶åŠå…¶ä½¿ç”¨ Builder æ¨¡å¼çš„ç¤ºä¾‹ï¼š

1. Spring Security

Spring Security ä½¿ç”¨äº†å»ºé€ è€…æ¨¡å¼ï¼Œåœ¨å¤šä¸ªé“¾å¼æ–¹æ³•ä¸­é…ç½®å’Œå®šåˆ¶èº«ä»½éªŒè¯å’Œå®‰å…¨æ€§é€‰é¡¹ã€‚ä»¥ä¸‹æ˜¯åˆ›å»ºä¸€ä¸ªç®€å•çš„ Spring Security é…ç½®çš„ç¤ºä¾‹ï¼š

```java
@Configuration
@EnableWebSecurity
public class SecurityConfiguration extends WebSecurityConfigurerAdapter {
 
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.authorizeRequests()
                .antMatchers("/login").permitAll() 
                .antMatchers("/index/**").hasRole("USER")  //ç­›é€‰è¯·æ±‚
                .and()
            .formLogin();
    }
 
    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication()
                .withUser("user").password("password").roles("USER");
    }
}
```

2. Lombok

Lombok æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ Java åº“ï¼Œå®ƒé€šè¿‡æä¾›æ³¨é‡Šæ¥ç®€åŒ–ä»£ç ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬å¸¦æœ‰ Builder æ¨¡å¼æ”¯æŒçš„ @Builder æ³¨é‡Šã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Lombok å’Œ Builder æ¨¡å¼çš„ä¾‹å­ï¼š

```java
@Builder
@AllArgsConstructor(access = AccessLevel.PRIVATE)
public class User {
    private final String firstName;
    private final String lastName;
    private final int age;
    private final String email;

    // getters
}
```

3. Google Guava

Google Guava æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Java åº“ï¼Œå®ƒåŒ…å«äº†å¾ˆå¤šæ–¹ä¾¿çš„å·¥å…·å’Œå‡½æ•°ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬äº†ä¸€ä¸ªä½¿ç”¨ Builder æ¨¡å¼æ¥åˆ›å»ºä¸å¯å˜å¯¹è±¡çš„ APIã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Google Guava çš„ä¸å¯å˜å¯¹è±¡åŠ Builder æ¨¡å¼çš„ç¤ºä¾‹ï¼š

```java
ImmutableList<String> list = ImmutableList.<String>builder()
                           .add("USA")
                           .add("India")
                           .add("China")
                           .add("Russia")
                           .add("Japan")
                           .build();

System.out.println(list);
```

4. Retrofit

Retrofit æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ Android å’Œ Java ç½‘ç»œåº“ï¼Œå®ƒä½¿ç”¨ Builder æ¨¡å¼æ¥æ„é€  Rest API è°ƒç”¨ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ Retrofit API åˆ›å»ºä¸€ä¸ªè¯·æ±‚çš„ç¤ºä¾‹ï¼š

```java
Call<List<User>> call = apIService.GetUser(id).execute();
```

## æ€»ç»“
æ„é€ è€…æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå¯ä»¥ç”¨äºåˆ›å»ºå¤æ‚å¯¹è±¡ã€‚å®ƒæä¾›äº†ä¸€ç§æ›´ä¼˜é›…å’Œå¯è¯»æ€§æ›´é«˜çš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸æ˜¯é€šè¿‡å¤šä¸ªæ„é€ å‡½æ•°æˆ–æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚

æ„é€ è€…æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡çš„æ„å»ºä¸è¡¨ç¤ºåˆ†ç¦»å¼€æ¥ï¼Œä»¥ä¾¿åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚è¿™ç§åˆ†ç¦»å¯ä»¥ä½¿æ„å»ºè¿‡ç¨‹æ›´åŠ çµæ´»ï¼Œå¹¶ä½¿å®¢æˆ·ç«¯ä»£ç æ›´åŠ ç®€å•ï¼Œä¸éœ€è¦å…³å¿ƒå¯¹è±¡çš„æ„å»ºç»†èŠ‚ã€‚

å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šâ€œå°è™å“¥çš„æŠ€æœ¯åšå®¢â€ã€‚æˆ‘ä»¬ä¼šå®šæœŸå‘å¸ƒå…³äºJavaæŠ€æœ¯çš„è¯¦å°½æ–‡ç« ï¼Œè®©æ‚¨èƒ½å¤Ÿæ·±å…¥äº†è§£è¯¥é¢†åŸŸçš„å„ç§æŠ€å·§å’Œæ–¹æ³•ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æˆä¸ºæ›´ä¼˜ç§€çš„ç¨‹åºå‘˜ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ’»ï¼


