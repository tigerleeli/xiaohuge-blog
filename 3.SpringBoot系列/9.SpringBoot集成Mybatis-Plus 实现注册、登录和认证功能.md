### ä¸€ã€å‰è¨€
ä¸€ä¸ªåŸºäº Spring Boot çš„åŒ…æ‹¬ç™»å½•ã€æ³¨å†Œã€ç”¨æˆ·è®¤è¯å®Œæ•´çš„é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥å­¦åˆ°ä»¥ä¸‹å†…å®¹ï¼š

- å®ç°åŸºäº Spring Boot çš„ Web åº”ç”¨ï¼ŒåŒ…æ‹¬å®šä¹‰æ¥å£ã€è¯·æ±‚å‚æ•°çš„å¤„ç†ã€è¿”å›ç»“æœçš„å°è£…ç­‰ã€‚
- å®ç°åŸºäº Mybatis-Plus çš„æ•°æ®åº“æ“ä½œï¼ŒåŒ…æ‹¬å®šä¹‰å®ä½“ç±»ã€å®šä¹‰ Mapper æ¥å£ã€é…ç½® Mapper æ‰«æç­‰ã€‚
- å®ç°åŸºäºspring-security-crypto å¯¹ç”¨æˆ·å¯†ç éå¯¹ç§°åŠ å¯†ä¿å­˜å’ŒéªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®ã€‚
- å®ç°åŸºäº JJWT çš„ Token å‘æ”¾å’Œè§£æï¼ŒåŒ…æ‹¬å®šä¹‰ Token çš„ç”Ÿæˆå’Œè§£æè§„åˆ™ã€å®šä¹‰ Token çš„å­˜å‚¨å’Œè·å–æ–¹å¼ç­‰ã€‚
- å®ç°åŸºäº ThreadLocal çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ŒåŒ…æ‹¬å®šä¹‰ä¸Šä¸‹æ–‡å¯¹è±¡çš„å°è£…å’Œä¿å­˜æ–¹å¼ã€å®šä¹‰ä¸Šä¸‹æ–‡å¯¹è±¡å®¹å™¨çš„å®ç°æ–¹å¼ç­‰ã€‚
### äºŒã€ç›®å½•ç»“æ„

![](https://files.mdnice.com/user/33663/f75cdcc2-35e5-490d-b4ce-1470a4d185fb.png)

### ä¸‰ã€Mavenä¾èµ–åŒ…
åœ¨pom.xml `dependencies`æ·»åŠ ä¸‹é¢ä¾èµ–

```xml
<dependency>
  <groupId>io.jsonwebtoken</groupId>
  <artifactId>jjwt</artifactId>
  <version>0.9.1</version>
</dependency>

<dependency>
  <groupId>cn.hutool</groupId>
  <artifactId>hutool-all</artifactId>
  <version>5.6.5</version>
</dependency>

<dependency>
  <groupId>org.springframework.security</groupId>
  <artifactId>spring-security-crypto</artifactId>
  <version>5.3.3.RELEASE</version>
</dependency>
```
- jjwt Java Json Web Token
- hutool-all å°è£…äº†å¾ˆå¤šå¥½ç”¨çš„Javaå·¥å…·ç±»ï¼Œå¼ºçƒˆæ¨èï¼Œéå¸¸å¥½ç”¨ï¼Œå®˜ç½‘åœ°å€ï¼š[https://www.hutool.cn/](https://www.hutool.cn/)
- spring-security-crypto å¯†ç åŠ å¯†å’Œè§£ç å·¥å…·

### å››ã€å°è£…ç»Ÿä¸€è¿”å›ç»“æœ
CommonResult ç±»

```java
package com.llh.springbootdemo.config;

public class CommonResult<T> {
    private Integer code;
    private String msg;
    private T data;

    public CommonResult(int code, String msg) {
        this.code = code;
        this.msg = msg;
    }

    public CommonResult(int code, String msg, T data) {
        this.code = code;
        this.msg = msg;
        this.data = data;
    }

    public static <T> CommonResult<T> success(T t) {
        return new CommonResult<T>(200, "æ“ä½œæˆåŠŸ", t);
    }

    public static <T> CommonResult<T> error(T t) {
        return new CommonResult<T>(300, "æ“ä½œå¤±è´¥", t);
    }

    public Integer getCode() {
        return code;
    }

    public void setCode(Integer code) {
        this.code = code;
    }

    public String getMsg() {
        return msg;
    }

    public void setMsg(String msg) {
        this.msg = msg;
    }

    public T getData() {
        return data;
    }

    public void setData(T data) {
        this.data = data;
    }

    @Override
    public String toString() {
        return "CommonResult{" +
                "code=" + code +
                ", msg='" + msg + '\'' +
                ", data=" + data +
                '}';
    }
}

```
---
- ä½¿ç”¨

```java
    @PostMapping("/register")
    public CommonResult<Boolean> register(@RequestBody UserInfo userInfo) {
        return CommonResult.success(userInfoService.register(userInfo));
    }

    @PostMapping("/login")
    public CommonResult<String> login(@RequestBody UserInfo userInfo) {
        return CommonResult.success(userInfoService.login(userInfo));
    }

```
è¿”å›ç»“æœå¦‚ä¸‹ï¼š
```json
{
    "code": 200,
    "msg": "æ“ä½œæˆåŠŸ",
    "data": true
}
```
### äº”ã€ç»Ÿä¸€å¼‚å¸¸æ‹¦æˆª
GlobalExceptionHandler ç±»

```java
package com.llh.springbootdemo.config;


import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;

@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(Exception.class)
    public CommonResult<String> exceptionHandler(Exception e) {
        return CommonResult.error(e.getMessage());
    }
}
```
- è¿™é‡Œåªæ˜¯åšäº†Exceptionçš„å¤„ç†ï¼Œæ‚¨å¯ä»¥åŠ ä¸Šè‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†ã€‚

### å…­ã€æ³¨å†ŒåŠŸèƒ½

PasswordEncoder#encodeå¯¹å¯†ç è¿›è¡ŒåŠ å¯†ï¼ŒåŠ å¯†æ˜¯éå¯¹ç§°åŠ å¯†ï¼Œå°±æ˜¯ç›¸åŒçš„å¯†ç åŠ å¯†åçš„å­—ç¬¦ä¸²éƒ½ä¸ä¸€æ ·ã€‚
```java
    @Override
    public Boolean register(UserInfo userInfo) {
        List<UserInfo> selectedList = list(new LambdaQueryWrapper<UserInfo>()
                .eq(UserInfo::getUsername, userInfo.getUsername()));
        if (!selectedList.isEmpty()) {
            throw new RuntimeException("æ³¨å†Œå¤±è´¥ï¼Œè¯¥ç”¨æˆ·åå·²å­˜åœ¨");
        }
        // å¯†ç åŠ å¯†
        PasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
        String encodedPassword = passwordEncoder.encode(userInfo.getPassword());
        userInfo.setPassword(encodedPassword);
        return save(userInfo);
    }
```
### ä¸ƒã€ç™»å½•åŠŸèƒ½
PasswordEncoder#matcheséªŒè¯å¯†ç 
```java
    @Override
    public String login(UserInfo userInfo) {
        List<UserInfo> selectedList = list(new LambdaQueryWrapper<UserInfo>()
                .eq(UserInfo::getUsername, userInfo.getUsername()));
        if (selectedList.isEmpty()) {
            throw new RuntimeException("ç™»å½•å¤±è´¥ï¼Œè´¦å·ä¸å­˜åœ¨");
        }
        UserInfo selected = selectedList.get(0);
        String encodedPassword = selected.getPassword();
        // åˆ¤æ–­å¯†ç æ˜¯å¦æ­£ç¡®
        PasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
        boolean result = passwordEncoder.matches(userInfo.getPassword(), encodedPassword);
        if (!result) {
            throw new RuntimeException("ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·å¯†ç é”™è¯¯");
        }
        // ç”Ÿæˆä»¤ç‰Œ
        HashMap<String, Object> map = new HashMap<>(2);
        map.put("userId", selected.getId());
        String token = JwtUtil.generateToken(map);
        return token;
    }

```
### å…«ã€JWTçš„ç”Ÿæˆä¸éªŒè¯å·¥å…·ç±»
JwtUtil ç±»

```java
package com.llh.springbootdemo.utils;

import cn.hutool.core.date.DateUtil;
import io.jsonwebtoken.ExpiredJwtException;
import io.jsonwebtoken.Jwts;
import io.jsonwebtoken.SignatureAlgorithm;

import java.util.Date;
import java.util.Map;

public class JwtUtil {
    /**
     * ä»¤ç‰Œå¯†ç  ä¸å°‘äº32ä½
     */
    private static final String SECRET = "token_secret";

    /**
     * ä»¤ç‰Œå‰ç¼€
     */
    private static final String TOKEN_PREFIX = "Bearer";

    /**
     * ä»¤ç‰Œè¿‡æœŸæ—¶é—´
     */
    private static final Integer EXPIRE_SECONDS = 60 * 60 * 24 * 7;


    /**
     * ç”Ÿæˆä»¤ç‰Œ
     */
    public static String generateToken(Map<String, Object> map) {
        String jwt = Jwts.builder()
                .setSubject("user info").setClaims(map)
                .signWith(SignatureAlgorithm.HS512, SECRET)
                .setExpiration(DateUtil.offsetSecond(new Date(), EXPIRE_SECONDS))
                .compact();
        return TOKEN_PREFIX + "_" + jwt;
    }

    /**
     * éªŒè¯ä»¤ç‰Œ
     */
    public static Map<String, Object> resolveToken(String token) {
        if (token == null) {
            throw new RuntimeException("ä»¤ç‰Œä¸ºç©º");
        }
        try {
            return Jwts.parser()
                    .setSigningKey(SECRET)
                    .parseClaimsJws(token.replaceFirst(TOKEN_PREFIX + "_", ""))
                    .getBody();
        } catch (ExpiredJwtException e) {
            throw new RuntimeException("ä»¤ç‰Œå·²è¿‡æœŸ");
        } catch (Exception e) {
            throw new RuntimeException("ä»¤ç‰Œè§£æå¼‚å¸¸");
        }
    }

}
```
### ä¹ã€ç»Ÿä¸€è¯·æ±‚æ‹¦æˆª
æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚è¿›å…¥æ‹¦æˆªå™¨ï¼Œä»è¯·æ±‚å¤´è·å–ä»¤ç‰Œï¼Œè§£æä»¤ç‰Œï¼Œå¹¶ä¿å­˜ç”¨æˆ·IDåˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­

TokenInterceptor ç±»  ä»¤ç‰Œæ‹¦æˆªå™¨

```java
package com.llh.springbootdemo.config;

import com.llh.springbootdemo.utils.JwtUtil;
import org.springframework.web.servlet.HandlerInterceptor;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.util.Arrays;
import java.util.List;
import java.util.Map;

public class TokenInterceptor implements HandlerInterceptor {

    /**
     * è¯·æ±‚å¤´
     */
    private static final String HEADER_AUTH = "Authorization";

    /**
     * å®‰å…¨çš„urlï¼Œä¸éœ€è¦ä»¤ç‰Œ
     */
    private static final List<String> SAFE_URL_LIST = Arrays.asList("/userInfo/login", "/userInfo/register");

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) {
        response.setContentType("application/json; charset=utf-8");

        String url = request.getRequestURI().substring(request.getContextPath().length());
        System.out.println(url);
        // ç™»å½•å’Œæ³¨å†Œç­‰è¯·æ±‚ä¸éœ€è¦ä»¤ç‰Œ
        if (SAFE_URL_LIST.contains(url)) {
            return true;
        }

        // ä»è¯·æ±‚å¤´é‡Œé¢è¯»å–token
        String token = request.getHeader(HEADER_AUTH);
        if (token == null) {
            throw new RuntimeException("è¯·æ±‚å¤±è´¥ï¼Œä»¤ç‰Œä¸ºç©º");
        }

        // è§£æä»¤ç‰Œ
        Map<String, Object> map = JwtUtil.resolveToken(token);
        Long userId = Long.parseLong(map.get("userId").toString());
        ContextHolder.setUserId(userId);
        return true;
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {
        ContextHolder.shutdown();
    }
}
```
- æ‰€æœ‰çš„è¯·æ±‚éƒ½é€šè¿‡`preHandle`æ–¹æ³•
- ` ContextHolder.setUserId(userId);`è¯·æ±‚å¼€å§‹å°†è§£æçš„ç”¨æˆ·idæ”¾å…¥ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚
- `ContextHolder.shutdown();`è¯·æ±‚ç»“æŸä»ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­å‰”é™¤ç”¨æˆ·idã€‚

---
WebMvcConfiguration ç±»  æ·»åŠ æ‹¦æˆªå™¨åˆ°MVCé…ç½®ä¸­

```java
package com.llh.springbootdemo.config;


import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;

@Configuration
public class WebMvcConfiguration extends WebMvcConfigurationSupport {
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new TokenInterceptor());
    }
}
```
---
ContextHolder ç±» ä¸Šä¸‹æ–‡å¯¹è±¡ç±»

```java
package com.llh.springbootdemo.config;

/**
 * @author llh
 */
public class ContextHolder {
    public static ThreadLocal<Long> context = new ThreadLocal<>();

    public static void setUserId(Long userId) {
        context.set(userId);
    }

    public static Long getUserId() {
        return context.get();
    }

    public static void shutdown() {
        context.remove();
    }
}
```
--- 
- ä¸»è¦ç”¨åˆ°äº†ThreadLocalï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªè¯·æ±‚çº¿ç¨‹ä¸­éƒ½å¯ä»¥è·å–åˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚  
- å¦‚ä¿®æ”¹å¯†ç   `Long userId = ContextHolder.getUserId();` è·å–ç”¨æˆ·idã€‚
- ä¿®æ”¹å¯†ç æ ¹æ®ç”¨æˆ·idå»æ›´æ–°æ•°æ®ï¼Œç”¨æˆ·idç›´æ¥ä»ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­æ‹¿ï¼Œè¿™æ ·å°±ä¸ç”¨ä»å‰ç«¯ä¼ è¿‡æ¥ï¼Œå¦‚æœä»å‰ç«¯ä¼ è¿‡æ¥ï¼Œç›¸å½“äºä»»ä½•äººéƒ½èƒ½ä¿®æ”¹å…¶å®ƒäººçš„å¯†ç äº†ï¼Œéå¸¸ä¸å®‰å…¨ã€‚
- ä»ä¸Šä¸‹æ–‡ä¸­æ‹¿ï¼Œä¹Ÿå°±æ˜¯ä»ä»¤ç‰Œä¸­æ‹¿ï¼Œå¯¹æ¥å£å°±è¡Œäº†ä¿æŠ¤ï¼Œåªèƒ½è‡ªå·±æ“ä½œè‡ªå·±çš„æ•°æ®ã€‚
```java
    @Override
    public Boolean changePassword(UserInfo userInfo) {
        // å¯†ç åŠ å¯†
        PasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
        String encodedPassword = passwordEncoder.encode(userInfo.getPassword());

        UserInfo updateUserInfo = new UserInfo();
        updateUserInfo.setPassword(encodedPassword);
        // ä»ä¸Šä¸‹æ–‡å¯¹è±¡é‡Œé¢è·å–ç”¨æˆ·idï¼Œè€Œä¸æ˜¯ç”¨æˆ·ä¼ è¿‡æ¥çš„
        Long userId = ContextHolder.getUserId();
        updateUserInfo.setId(userId);
        return updateById(updateUserInfo);
    }
```

### åã€å®Œæ•´çš„ä»£ç 
UserInfoService

```java
package com.llh.springbootdemo.service;

import com.baomidou.mybatisplus.extension.service.IService;
import com.llh.springbootdemo.entity.UserInfo;

public interface UserInfoService extends IService<UserInfo> {
    /**
     * æ³¨å†Œ
     *
     * @param userInfo æ³¨å†Œä¿¡æ¯
     * @return æ˜¯å¦æˆåŠŸ
     */
    Boolean register(UserInfo userInfo);

    /**
     * ç™»å½•
     *
     * @param userInfo ç™»å½•ä¿¡æ¯
     * @return ä»¤ç‰Œ
     */
    String login(UserInfo userInfo);

    /**
     * æ›´æ”¹å¯†ç 
     *
     * @param userInfo ç”¨æˆ·ä¿¡æ¯
     * @return æ˜¯å¦æˆåŠŸ
     */
    Boolean changePassword(UserInfo userInfo);
}

```
---
UserInfoServiceImpl

```java
package com.llh.springbootdemo.service.impl;

import com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import com.llh.springbootdemo.config.ContextHolder;
import com.llh.springbootdemo.entity.UserInfo;
import com.llh.springbootdemo.mapper.UserInfoMapper;
import com.llh.springbootdemo.service.UserInfoService;
import com.llh.springbootdemo.utils.JwtUtil;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;

import java.util.HashMap;
import java.util.List;

@Service
public class UserInfoServiceImpl extends ServiceImpl<UserInfoMapper, UserInfo> implements UserInfoService {
    @Override
    public Boolean register(UserInfo userInfo) {
        List<UserInfo> selectedList = list(new LambdaQueryWrapper<UserInfo>()
                .eq(UserInfo::getUsername, userInfo.getUsername()));
        if (!selectedList.isEmpty()) {
            throw new RuntimeException("æ³¨å†Œå¤±è´¥ï¼Œè¯¥ç”¨æˆ·åå·²å­˜åœ¨");
        }
        // å¯†ç åŠ å¯†
        PasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
        String encodedPassword = passwordEncoder.encode(userInfo.getPassword());
        userInfo.setPassword(encodedPassword);
        return save(userInfo);
    }

    @Override
    public String login(UserInfo userInfo) {
        List<UserInfo> selectedList = list(new LambdaQueryWrapper<UserInfo>()
                .eq(UserInfo::getUsername, userInfo.getUsername()));
        if (selectedList.isEmpty()) {
            throw new RuntimeException("ç™»å½•å¤±è´¥ï¼Œè´¦å·ä¸å­˜åœ¨");
        }
        UserInfo selected = selectedList.get(0);
        String encodedPassword = selected.getPassword();
        // åˆ¤æ–­å¯†ç æ˜¯å¦æ­£ç¡®
        PasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
        boolean result = passwordEncoder.matches(userInfo.getPassword(), encodedPassword);
        if (!result) {
            throw new RuntimeException("ç™»å½•å¤±è´¥ï¼Œç”¨æˆ·å¯†ç é”™è¯¯");
        }
        // ç”Ÿæˆä»¤ç‰Œ
        HashMap<String, Object> map = new HashMap<>(2);
        map.put("userId", selected.getId());
        String token = JwtUtil.generateToken(map);
        return token;
    }

    @Override
    public Boolean changePassword(UserInfo userInfo) {
        // å¯†ç åŠ å¯†
        PasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
        String encodedPassword = passwordEncoder.encode(userInfo.getPassword());

        UserInfo updateUserInfo = new UserInfo();
        updateUserInfo.setPassword(encodedPassword);
        // ä»ä¸Šä¸‹æ–‡å¯¹è±¡é‡Œé¢è·å–ç”¨æˆ·idï¼Œè€Œä¸æ˜¯ç”¨æˆ·ä¼ è¿‡æ¥çš„
        Long userId = ContextHolder.getUserId();
        updateUserInfo.setId(userId);
        return updateById(updateUserInfo);
    }

}

```
---
UserInfoController

```java
package com.llh.springbootdemo.controller;

import com.llh.springbootdemo.config.CommonResult;
import com.llh.springbootdemo.entity.UserInfo;
import com.llh.springbootdemo.service.UserInfoService;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import javax.annotation.Resource;

@RestController
@RequestMapping("/userInfo")
public class UserInfoController {
    @Resource
    private UserInfoService userInfoService;


    @PostMapping("/register")
    public CommonResult<Boolean> register(@RequestBody UserInfo userInfo) {
        return CommonResult.success(userInfoService.register(userInfo));
    }

    @PostMapping("/login")
    public CommonResult<String> login(@RequestBody UserInfo userInfo) {
        return CommonResult.success(userInfoService.login(userInfo));
    }

    @PostMapping("/changePassword")
    public CommonResult<Boolean> changePassword(@RequestBody UserInfo userInfo) {
        return CommonResult.success(userInfoService.changePassword(userInfo));
    }

}

```
---
pom.xml

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.3.2.RELEASE</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.llh</groupId>
    <artifactId>spring-boot-demo</artifactId>
    <version>1.0.0</version>
    <name>spring-boot-demo</name>
    <description>springboot project description</description>

    <properties>
        <mybatis-spring-boot.version>2.1.4</mybatis-spring-boot.version>
        <mybatis-plus.version>3.4.2</mybatis-plus.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter</artifactId>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
        </dependency>

        <dependency>
            <groupId>org.mybatis.spring.boot</groupId>
            <artifactId>mybatis-spring-boot-starter</artifactId>
            <version>${mybatis-spring-boot.version}</version>
        </dependency>

        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-boot-starter</artifactId>
            <version>${mybatis-plus.version}</version>
        </dependency>

        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt</artifactId>
            <version>0.9.1</version>
        </dependency>

        <dependency>
            <groupId>cn.hutool</groupId>
            <artifactId>hutool-all</artifactId>
            <version>5.6.5</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-crypto</artifactId>
            <version>5.3.3.RELEASE</version>
        </dependency>
    </dependencies>

</project>

```
### åä¸€ã€æµ‹è¯•
#### 11.1 æ³¨å†Œ
æŸ¥çœ‹æ•°æ®åº“ å¯†ç æ˜¯åŠ å¯†åçš„

![](https://files.mdnice.com/user/33663/a020180e-710b-4434-9fa3-45a6ace2932c.png)



#### 11.2 ç™»å½•
ç™»å½•æˆåŠŸè¿”å›ä»¤ç‰Œ

![](https://files.mdnice.com/user/33663/99a4b8af-b9f3-45e2-9715-38ffb03665d8.png)


#### 11.3 ä¿®æ”¹å¯†ç 
éœ€è¦åœ¨è¯·æ±‚å¤´`Authorization`åŠ ä¸Šä»¤ç‰Œ

![](https://files.mdnice.com/user/33663/3a5691c9-c7ea-4310-b96b-400f657e2b17.png)


å¯†ç ä¿®æ”¹ç”±123456->12345678

![](https://files.mdnice.com/user/33663/095dfbe4-fe82-4407-a0b9-b3be3556a691.png)


### åäºŒã€ç»“è¯­
é€šè¿‡ä»¥ä¸Šå†…å®¹çš„å­¦ä¹ å’Œå®è·µï¼Œæˆ‘ä»¬å¯ä»¥æŒæ¡åŸºäº Spring Boot å®ç°ç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œè®¤è¯çš„æ–¹æ³•å’ŒæŠ€å·§ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥äº†è§£åˆ°å¦‚ä½•ä½¿ç”¨ Spring Boot é…ç½® Web åº”ç”¨ã€ä½¿ç”¨ Mybatis-Plus æ“ä½œæ•°æ®åº“ã€ä½¿ç”¨ Spring Security å®ç°è®¤è¯å’Œæˆæƒç­‰ï¼Œè¿™äº›å†…å®¹å¯ä»¥å¯¹æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚

å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šâ€œå°è™å“¥çš„æŠ€æœ¯åšå®¢â€ã€‚æˆ‘ä»¬ä¼šå®šæœŸå‘å¸ƒå…³äºJavaæŠ€æœ¯çš„è¯¦å°½æ–‡ç« ï¼Œè®©æ‚¨èƒ½å¤Ÿæ·±å…¥äº†è§£è¯¥é¢†åŸŸçš„å„ç§æŠ€å·§å’Œæ–¹æ³•ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æˆä¸ºæ›´ä¼˜ç§€çš„ç¨‹åºå‘˜ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ’»ï¼

ç›¸å…³æ–‡ç« æºç æ”¾åœ¨ï¼š[giteeä»“åº“](https://gitee.com/cunzaizhe/xiaohuge-blog)ã€[githubä»“åº“](https://github.com/tigerleeli/xiaohuge-blog)ä¸Šã€‚