åœ¨ SpringBoot é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å°†ç»“æœæ•°æ®å°è£…æˆç‰¹å®šçš„æ ¼å¼ï¼Œä»¥æ–¹ä¾¿å®¢æˆ·ç«¯è¿›è¡Œå¤„ç†ã€‚æˆ‘ä»¬å¯ä»¥å°†å°è£…ç»“æœçš„ä»£ç å°è£…æˆä¸€ä¸ªå·¥å…·ç±»æˆ–ç»Ÿä¸€çš„å“åº”ç±»å‹ï¼Œä»¥ç®€åŒ–ä»£ç çš„ç¼–å†™å·¥ä½œï¼Œå¹¶ä¸”æ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè¯´æ˜å¦‚ä½•å¯¹ SpringBoot è¿”å›ç»“æœè¿›è¡Œå°è£…ã€‚

### 1. å®šä¹‰ CommonResult ç±»

æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåä¸º `CommonResult<T>` çš„ç±»ï¼Œç”¨äºå°è£…æ¥å£çš„å“åº”ç»“æœã€‚å®ƒåŒ…å«ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«å¯¹åº”äº†çŠ¶æ€ç  codeã€å“åº”æ¶ˆæ¯ msg å’Œå“åº”æ•°æ® dataï¼Œå…¶ä¸­æ•°æ®ç±»å‹ä¸ºæ³›å‹ Tã€‚code å­—æ®µæ˜¯ int ç±»å‹çš„ã€‚

```java
public class CommonResult<T> {
    private int code;  // å“åº”çŠ¶æ€ç 
    private String msg;  // å“åº”æ¶ˆæ¯
    private T data;  // å“åº”æ•°æ®

    // æ„é€ å™¨
    public CommonResult() {}
    public CommonResult(int code, String msg, T data) {
        this.code = code;
        this.msg = msg;
        this.data = data;
    }

    // çœç•¥ Getter å’Œ Setter æ–¹æ³•
}
```

### 2. å®šä¹‰å“åº”ç  ResponseCode

ä¸ºäº†æ–¹ä¾¿ç®¡ç†å’Œè°ƒç”¨å“åº”çŠ¶æ€ç ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåä¸º `ResponseCode` çš„ç±»ï¼Œç”¨æ¥ç»Ÿä¸€ç®¡ç†å“åº”çŠ¶æ€ç ã€‚

```java
public enum ResponseCode {
    SUCCESS(200, "æ“ä½œæˆåŠŸ"),
    FAIL(500, "æ“ä½œå¤±è´¥");

    // çŠ¶æ€ç å’ŒçŠ¶æ€ä¿¡æ¯
    private final int code;
    private final String message;

    // æ„é€ å™¨
    private ResponseCode(int code, String message) {
        this.code = code;
        this.message = message;
    }

    // Getter æ–¹æ³•
    public int getCode() {
        return code;
    }

    public String getMessage() {
        return message;
    }
}
```

åœ¨è¿™é‡Œæˆ‘ä»¬åªå®šä¹‰äº†ä¸¤ç§å“åº”çŠ¶æ€ç ï¼Œåˆ†åˆ«æ˜¯æˆåŠŸå’Œå¤±è´¥ï¼Œå¯¹åº”çš„çŠ¶æ€ç åˆ†åˆ«ä¸º 200 å’Œ 500ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯å®šä¹‰æ›´å¤šçš„å“åº”çŠ¶æ€ç ã€‚

### 3. è‡ªå®šä¹‰å¼‚å¸¸ BizException

æˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ç±» `BizException`ï¼Œç”¨äºå¤„ç†è‡ªå®šä¹‰å¼‚å¸¸åœºæ™¯ï¼Œå¹¶åœ¨ `GlobalExceptionHandler` ä¸­è¿›è¡Œæ‹¦æˆªä¸å¤„ç†ã€‚

```java
public class BizException extends RuntimeException {
    private int code;

    public BizException(ResponseCode responseCode) {
        super(responseCode.getMessage());
        this.code = responseCode.getCode();
    }
    // Getter æ–¹æ³•
    public int getCode() {
        return code;
    }
}
```
- Bizæ˜¯è‹±æ–‡Businessçš„ç¼©å†™ï¼Œè¡¨ç¤ºä¸šåŠ¡ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚

åœ¨è¯¥ç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†å“åº”çŠ¶æ€ç å¯¹åº”çš„å¼‚å¸¸ï¼Œå¹¶åœ¨æ„é€ æ–¹æ³•ä¸­ä¼ å…¥å¯¹åº”çš„ `ResponseCode` æ¥åˆå§‹åŒ–å¼‚å¸¸çš„ `code` å­—æ®µã€‚

### 4. ç»Ÿä¸€å¤„ç†å¼‚å¸¸æƒ…å†µ

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¼‚å¸¸æƒ…å†µè¿›è¡Œå¤„ç†ï¼Œä»¥ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯æ§æ€§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¹å¤–æš´éœ²çš„ API æ¥å£ä¸­æ·»åŠ å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œä»¥ç»Ÿä¸€å¤„ç†ç³»ç»ŸæŠ›å‡ºçš„å¼‚å¸¸æƒ…å†µï¼Œå¹¶é˜²æ­¢ç³»ç»ŸæŒ‚æ‰ã€‚

åœ¨ SpringBoot ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ `@RestControllerAdvice` å’Œ `@ExceptionHandler` æ³¨è§£æ¥è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚å…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹ï¼š

```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    @ExceptionHandler(Exception.class)
    public CommonResult<String> handleException(Exception e) {
        log.error("ç³»ç»Ÿå¼‚å¸¸ï¼š{}", e.getMessage());
        return new CommonResult<>(ResponseCode.FAIL.getCode(), "ç³»ç»Ÿé”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜", null);
    }

    @ExceptionHandler(BizException.class)
    public CommonResult<String> handleBizException(BizException e) {
        log.error("ä¸šåŠ¡å¼‚å¸¸ï¼š{}", e.getMessage());
        return new CommonResult<>(e.getCode(), e.getMessage(), null);
    }
}
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† `@RestControllerAdvice` æ³¨è§£æ¥å®šä¹‰ä¸€ä¸ªå…¨å±€çš„å¼‚å¸¸å¤„ç†ç±»ï¼Œä½¿ç”¨ `@ExceptionHandler(Exception.class)` å’Œ `@ExceptionHandler(BizException.class)` æ³¨è§£æ¥åˆ†åˆ«å¤„ç†å…¨å±€å¼‚å¸¸å’Œè‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸ã€‚

å½“ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œä¼šè¢« `handleException` æ–¹æ³•æ‰€æ•è·ï¼Œè¾“å‡ºå¼‚å¸¸æ—¥å¿—ï¼Œå¹¶è¿”å›ä¸€ä¸ªä¸šåŠ¡å¤±è´¥çš„ç»“æœã€‚è€Œå½“ä¸šåŠ¡å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œä¼šè¢« `handleBizException` æ–¹æ³•æ‰€æ•è·ï¼Œè¿”å›è¯¥ä¸šåŠ¡å¼‚å¸¸å¯¹åº”çš„çŠ¶æ€ç ã€å“åº”æ¶ˆæ¯å’Œå“åº”æ•°æ®ã€‚

### 4. ä½¿ç”¨ç»“æœå°è£…ç±»å’Œæ¨¡æ‹Ÿå¼‚å¸¸æ‹¦æˆª

```java
@RestController
@RequestMapping("/api")
public class UserController {
    // çœç•¥æ³¨å…¥ä»£ç 
    
    @GetMapping("/users/{id}")
    public CommonResult<User> getUserById(@PathVariable("id") Long id) {
        User user = userService.getUserById(id);
        if (null != user) {
            return new CommonResult<>(ResponseCode.SUCCESS.getCode(), ResponseCode.SUCCESS.getMessage(), user);
        } else {
            throw new BizException(ResponseCode.FAIL);
        }
    }
}
```
- ä½¿ç”¨`CommonResult<User>`æ¥è¿”å›æ•°æ®ç»™å‰ç«¯
- `throw new BizException(ResponseCode.FAIL);`æŠ›å‡ºå¼‚å¸¸åä¼šåœ¨å¼‚å¸¸æ‹¦æˆªå™¨é‚£é‡Œæ‹¦æˆªç»Ÿä¸€è¿›è¡Œå¤„ç†


### 5. æ€»ç»“

åœ¨æœ¬ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ SpringBoot æ¥å°è£…è¿”å›ç»“æœã€‚æˆ‘ä»¬å®šä¹‰äº† `CommonResult` ç±»ã€`ResponseCode` ç±»å’Œ `BizException` è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ç±»ï¼Œç”¨äºå°è£…å“åº”ç»“æœã€ç»Ÿä¸€ç®¡ç†å“åº”çŠ¶æ€ç å’Œå¤„ç†è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ã€‚æˆ‘ä»¬ä¹Ÿä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ `@RestControllerAdvice` å’Œ `@ExceptionHandler` æ³¨è§£æ¥ç»Ÿä¸€å¤„ç†å¼‚å¸¸æƒ…å†µï¼Œé¿å…å› ä¸ºå¼‚å¸¸æƒ…å†µå¯¼è‡´ç³»ç»Ÿä¸ç¨³å®šã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…æƒ…å†µå¯¹ä»¥ä¸Šä»£ç è¿›è¡Œä¿®æ”¹å’Œè°ƒæ•´ï¼Œä»¥é€‚åº”ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ã€‚

å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šâ€œå°è™å“¥çš„æŠ€æœ¯åšå®¢â€ã€‚æˆ‘ä»¬ä¼šå®šæœŸå‘å¸ƒå…³äºJavaæŠ€æœ¯çš„è¯¦å°½æ–‡ç« ï¼Œè®©æ‚¨èƒ½å¤Ÿæ·±å…¥äº†è§£è¯¥é¢†åŸŸçš„å„ç§æŠ€å·§å’Œæ–¹æ³•ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æˆä¸ºæ›´ä¼˜ç§€çš„ç¨‹åºå‘˜ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ’»ï¼